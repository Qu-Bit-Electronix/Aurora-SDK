\hypertarget{aurora_8h_source}{}\doxysection{aurora.\+h}
\label{aurora_8h_source}\index{include/aurora.h@{include/aurora.h}}
\mbox{\hyperlink{aurora_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{2 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#ifndef AURORA\_HW\_H}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#define AURORA\_HW\_H}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}daisy\_seed.h"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}fatfs.h"{}}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define DTCMRAM \_\_attribute\_\_((section("{}.dtcmram\_bss"{}})))}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define D2RAM \_\_attribute\_\_((section("{}.d2\_bss"{}})))}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#define D2RAM2 \_\_attribute\_\_((section("{}.d2r2\_bss"{}})))}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#define ITCMRAM \_\_attribute\_\_((section("{}.itcmram\_bss"{}})))}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceaurora}{aurora}}}
\DoxyCodeLine{15 \{}
\DoxyCodeLine{16 }
\DoxyCodeLine{20 \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} kMaxBlockSize = 96;}
\DoxyCodeLine{21 }
\DoxyCodeLine{25 \textcolor{keyword}{static} daisy::LedDriverPca9685<2, true>::DmaBuffer DMA\_BUFFER\_MEM\_SECTION}
\DoxyCodeLine{26     led\_dma\_buffer\_a,}
\DoxyCodeLine{27     led\_dma\_buffer\_b;}
\DoxyCodeLine{28 }
\DoxyCodeLine{33 daisy::USBHostHandle \mbox{\hyperlink{namespaceaurora_add63f29f2efd87c1754e7add264350e8}{usb}};}
\DoxyCodeLine{34 }
\DoxyCodeLine{39 daisy::FatFSInterface \mbox{\hyperlink{namespaceaurora_a300b1377a387f60ff447c08d7a747877}{fatfs\_interface}};}
\DoxyCodeLine{40 }
\DoxyCodeLine{45 \textcolor{keyword}{enum} \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbceca}{ControlKnobs}}}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa7355bc47484ac9009e9ae5ea4519711c}{KNOB\_TIME}},}
\DoxyCodeLine{48     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa5e99ba973f08c9c45bc352aaa8d9315b}{KNOB\_REFLECT}},}
\DoxyCodeLine{49     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa4030ec072fbbcc5198927f787fc381ae}{KNOB\_MIX}},}
\DoxyCodeLine{50     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa26e02f7c718ee0ba934d0fc005355179}{KNOB\_ATMOSPHERE}},}
\DoxyCodeLine{51     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa309901733cbf3f6fd847f847b88ff47d}{KNOB\_BLUR}},}
\DoxyCodeLine{52     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa132e93ba27b993bd7bc17d340be96928}{KNOB\_WARP}},}
\DoxyCodeLine{53     \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}},}
\DoxyCodeLine{54 \};}
\DoxyCodeLine{55 }
\DoxyCodeLine{60 \textcolor{keyword}{enum} \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06b}{ControlCVs}}}
\DoxyCodeLine{61 \{}
\DoxyCodeLine{62     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba14a9a281ea2e5fb0f4643ea71ac8f4fc}{CV\_ATMOSPHERE}},}
\DoxyCodeLine{63     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba99ad46bf89ab0808918343824a12003d}{CV\_TIME}},}
\DoxyCodeLine{64     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba20130ae1b93454a79fc03aeebe1c3459}{CV\_MIX}},}
\DoxyCodeLine{65     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53094bc7122e2e060a025919c0b4c006}{CV\_REFLECT}},}
\DoxyCodeLine{66     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba38a54728d2de8f46f2a0ec1e9b93d922}{CV\_BLUR}},}
\DoxyCodeLine{67     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53812239f728e42ebeffcdcb9c076345}{CV\_WARP}},}
\DoxyCodeLine{68     \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}},}
\DoxyCodeLine{69 \};}
\DoxyCodeLine{70 }
\DoxyCodeLine{75 \textcolor{keyword}{enum} \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921}{Switches}}}
\DoxyCodeLine{76 \{}
\DoxyCodeLine{77     \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a725a2822002e2209fc0916f2173d3271}{SW\_FREEZE}},}
\DoxyCodeLine{78     \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a45ae311227c962283f6c55b0b865b8c2}{SW\_REVERSE}},}
\DoxyCodeLine{79     \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a6544313cfea960b855983f2c347ea96a}{SW\_SHIFT}},}
\DoxyCodeLine{80     \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a77fb243b24a94ebedcf2251056027b64}{SW\_LAST}},}
\DoxyCodeLine{81 \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{87 \textcolor{keyword}{enum} \mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3e}{Gates}}}
\DoxyCodeLine{88 \{}
\DoxyCodeLine{89     \mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3eaa74bc67b4d25cfae7d624cc022afda9e}{GATE\_FREEZE}},}
\DoxyCodeLine{90     \mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3ea57f639eba139528e9d5976c480688885}{GATE\_REVERSE}},}
\DoxyCodeLine{91     \mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3ea8a43310078f25453bf3286dfcac4a2f5}{GATE\_LAST}},}
\DoxyCodeLine{92 \};}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 }
\DoxyCodeLine{99 \textcolor{keyword}{enum} \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1e}{Leds}}}
\DoxyCodeLine{100 \{}
\DoxyCodeLine{101     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea86982932ab7fceff1b3ed9de87f9a76d}{LED\_REVERSE}},}
\DoxyCodeLine{102     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eae68413e53d500917bb75e2cae59f3730}{LED\_FREEZE}},}
\DoxyCodeLine{103     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea65e83be6acc64c896bb19b9935b2609f}{LED\_1}},}
\DoxyCodeLine{104     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaab18baf373916582c323adb76225530c}{LED\_2}},}
\DoxyCodeLine{105     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaec6469783dfe550322a1607be048efa5}{LED\_3}},}
\DoxyCodeLine{106     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eae9295b936e7a9fb1d1dde59c33fc984b}{LED\_4}},}
\DoxyCodeLine{107     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea2796848b297e45ac06f7e044aeb5a72a}{LED\_5}},}
\DoxyCodeLine{108     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea8d53466cd8e0ca6e26db667a712b3355}{LED\_6}},}
\DoxyCodeLine{109     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaa0f415470c1fdebdfec36875368a4344}{LED\_BOT\_1}},}
\DoxyCodeLine{110     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea3828db9a1a9a0af93a0c2c5115698096}{LED\_BOT\_2}},}
\DoxyCodeLine{111     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1ea8624f9c01b04230b5b2c17453bd52068}{LED\_BOT\_3}},}
\DoxyCodeLine{112     \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaa843f019f3d74106e40f62494ddf0c65}{LED\_LAST}},}
\DoxyCodeLine{113 \};}
\DoxyCodeLine{114 }
\DoxyCodeLine{119 \textcolor{keyword}{struct }\mbox{\hyperlink{structaurora_1_1_calibration_data}{CalibrationData}}}
\DoxyCodeLine{120 \{}
\DoxyCodeLine{121     \mbox{\hyperlink{structaurora_1_1_calibration_data_a5a7d13ebabd35f636552609195866412}{CalibrationData}}() : \mbox{\hyperlink{structaurora_1_1_calibration_data_a7e6762ab247441c83ec2ca5a4f144aaf}{warp\_scale}}(60.f), \mbox{\hyperlink{structaurora_1_1_calibration_data_a0e627bce3225368e323af33d1b25163e}{warp\_offset}}(0.f), \mbox{\hyperlink{structaurora_1_1_calibration_data_ad81e9e57211284b888de3dd4311849ab}{cv\_offset}}\{0.f\} \{\}}
\DoxyCodeLine{122     \textcolor{keywordtype}{float} \mbox{\hyperlink{structaurora_1_1_calibration_data_a7e6762ab247441c83ec2ca5a4f144aaf}{warp\_scale}}, \mbox{\hyperlink{structaurora_1_1_calibration_data_a0e627bce3225368e323af33d1b25163e}{warp\_offset}};}
\DoxyCodeLine{123     \textcolor{keywordtype}{float} \mbox{\hyperlink{structaurora_1_1_calibration_data_ad81e9e57211284b888de3dd4311849ab}{cv\_offset}}[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}];}
\DoxyCodeLine{124 }
\DoxyCodeLine{126     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaurora_1_1_calibration_data_a41f449cabeceb25d3ac24b7f7493a8c1}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structaurora_1_1_calibration_data}{CalibrationData}} \&rhs)}
\DoxyCodeLine{127     \{}
\DoxyCodeLine{128         \textcolor{keywordflow}{if}(\mbox{\hyperlink{structaurora_1_1_calibration_data_a7e6762ab247441c83ec2ca5a4f144aaf}{warp\_scale}} != rhs.\mbox{\hyperlink{structaurora_1_1_calibration_data_a7e6762ab247441c83ec2ca5a4f144aaf}{warp\_scale}})}
\DoxyCodeLine{129         \{}
\DoxyCodeLine{130             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{131         \}}
\DoxyCodeLine{132         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{structaurora_1_1_calibration_data_a0e627bce3225368e323af33d1b25163e}{warp\_offset}} != rhs.\mbox{\hyperlink{structaurora_1_1_calibration_data_a0e627bce3225368e323af33d1b25163e}{warp\_offset}})}
\DoxyCodeLine{133         \{}
\DoxyCodeLine{134             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{135         \}}
\DoxyCodeLine{136         \textcolor{keywordflow}{else}}
\DoxyCodeLine{137         \{}
\DoxyCodeLine{138             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{139             \{}
\DoxyCodeLine{140                 \textcolor{keywordflow}{if}(\mbox{\hyperlink{structaurora_1_1_calibration_data_ad81e9e57211284b888de3dd4311849ab}{cv\_offset}}[i] != rhs.\mbox{\hyperlink{structaurora_1_1_calibration_data_ad81e9e57211284b888de3dd4311849ab}{cv\_offset}}[i])}
\DoxyCodeLine{141                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{142             \}}
\DoxyCodeLine{143         \}}
\DoxyCodeLine{144         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{145     \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{148     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaurora_1_1_calibration_data_a86af54bbbf7080b22224c0d33d83d9ba}{operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structaurora_1_1_calibration_data}{CalibrationData}} \&rhs) \{ \textcolor{keywordflow}{return} !\mbox{\hyperlink{structaurora_1_1_calibration_data_a41f449cabeceb25d3ac24b7f7493a8c1}{operator==}}(rhs); \}}
\DoxyCodeLine{149 \};}
\DoxyCodeLine{150 }
\DoxyCodeLine{158 \textcolor{keyword}{class }\mbox{\hyperlink{classaurora_1_1_hardware}{Hardware}}}
\DoxyCodeLine{159 \{}
\DoxyCodeLine{160   \textcolor{keyword}{public}:}
\DoxyCodeLine{164     \mbox{\hyperlink{classaurora_1_1_hardware_a408e32e9bff8a58db98aabea9b4cfe51}{Hardware}}() \{\}}
\DoxyCodeLine{165 }
\DoxyCodeLine{169     \mbox{\hyperlink{classaurora_1_1_hardware_a5059921c098da2e193c17dd54fddc9e8}{\string~Hardware}}() \{\}}
\DoxyCodeLine{170 }
\DoxyCodeLine{178     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_ae28c61e1df5ed8b16112f65e1b463ff8}{Init}}(\textcolor{keywordtype}{bool} boost = \textcolor{keyword}{true})}
\DoxyCodeLine{179     \{}
\DoxyCodeLine{180         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.Init(boost);}
\DoxyCodeLine{181         hw\_version = GetBoardRevision();}
\DoxyCodeLine{182         ConfigureAudio();}
\DoxyCodeLine{183         ConfigureControls();}
\DoxyCodeLine{184         ConfigureLeds();}
\DoxyCodeLine{185         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.Start();}
\DoxyCodeLine{186         \mbox{\hyperlink{classaurora_1_1_hardware_afd8e9b305b13614c94e095e521de142c}{SetAudioSampleRate}}(daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ);}
\DoxyCodeLine{187         \mbox{\hyperlink{classaurora_1_1_hardware_aa7205d245f0b220379dd42e33031aee6}{SetAudioBlockSize}}(96);}
\DoxyCodeLine{188         \mbox{\hyperlink{classaurora_1_1_hardware_a1409ef9c06403f3793537b8dce62af56}{UpdateHidRates}}();}
\DoxyCodeLine{189 }
\DoxyCodeLine{190         LoadCalibrationData();}
\DoxyCodeLine{191         cal\_save\_flag\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{192         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{193         \{}
\DoxyCodeLine{194             cv\_offsets\_[i] = 0.f;}
\DoxyCodeLine{195         \}}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197 }
\DoxyCodeLine{202     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a109f3b7352656c0cf9c4af1d93411819}{StartAudio}}(daisy::AudioHandle::AudioCallback cb)}
\DoxyCodeLine{203     \{}
\DoxyCodeLine{204         current\_cb\_ = cb;}
\DoxyCodeLine{205         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.StartAudio(cb);}
\DoxyCodeLine{206     \}}
\DoxyCodeLine{207 }
\DoxyCodeLine{209     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aee36d4d80dc37991ef018c9d8839768b}{ChangeAudioCallback}}(daisy::AudioHandle::AudioCallback cb)}
\DoxyCodeLine{210     \{}
\DoxyCodeLine{211         current\_cb\_ = cb;}
\DoxyCodeLine{212         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.ChangeAudioCallback(cb);}
\DoxyCodeLine{213     \}}
\DoxyCodeLine{214 }
\DoxyCodeLine{216     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a5326282c8311afe5eb977c659e20eb58}{StartAudio}}(daisy::AudioHandle::InterleavingAudioCallback cb)}
\DoxyCodeLine{217     \{}
\DoxyCodeLine{218         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.StartAudio(cb);}
\DoxyCodeLine{219     \}}
\DoxyCodeLine{220 }
\DoxyCodeLine{222     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a283146257c8f77b8a0e72f3d2025cf93}{ChangeAudioCallback}}(daisy::AudioHandle::InterleavingAudioCallback cb)}
\DoxyCodeLine{223     \{}
\DoxyCodeLine{224         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.ChangeAudioCallback(cb);}
\DoxyCodeLine{225     \}}
\DoxyCodeLine{226 }
\DoxyCodeLine{235     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_abb134a8f6729b9379b3a1da933340392}{StartLowPriorityCallback}}(daisy::TimerHandle::PeriodElapsedCallback cb,}
\DoxyCodeLine{236                                   uint32\_t target\_freq,}
\DoxyCodeLine{237                                   \textcolor{keywordtype}{void}    *data = \textcolor{keyword}{nullptr})}
\DoxyCodeLine{238     \{}
\DoxyCodeLine{239         daisy::TimerHandle::Config timcfg;}
\DoxyCodeLine{240         timcfg.periph        = daisy::TimerHandle::Config::Peripheral::TIM\_5;}
\DoxyCodeLine{241         timcfg.dir           = daisy::TimerHandle::Config::CounterDir::UP;}
\DoxyCodeLine{242         \textcolor{keyword}{auto} tim\_base\_freq   = daisy::System::GetPClk2Freq();}
\DoxyCodeLine{243         \textcolor{keyword}{auto} tim\_target\_freq = target\_freq;}
\DoxyCodeLine{244         \textcolor{keyword}{auto} tim\_period      = tim\_base\_freq / tim\_target\_freq;}
\DoxyCodeLine{245         timcfg.period        = tim\_period;}
\DoxyCodeLine{246         timcfg.enable\_irq    = \textcolor{keyword}{true};}
\DoxyCodeLine{247         tim5\_handle.Init(timcfg);}
\DoxyCodeLine{248         tim5\_handle.SetCallback(cb, data);}
\DoxyCodeLine{250         tim5\_handle.Start();}
\DoxyCodeLine{251     \}}
\DoxyCodeLine{252 }
\DoxyCodeLine{259     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aa1052faa54a363f9c84be71272fea7b1}{ChangeSampleRate}}(\textcolor{keywordtype}{int} sr)}
\DoxyCodeLine{260     \{}
\DoxyCodeLine{261         daisy::SaiHandle::Config::SampleRate srval;}
\DoxyCodeLine{262         \textcolor{keywordtype}{size\_t}                               new\_blocksize = 96;}
\DoxyCodeLine{263         \textcolor{keywordflow}{switch}(sr)}
\DoxyCodeLine{264         \{}
\DoxyCodeLine{265             \textcolor{keywordflow}{case} 16000:}
\DoxyCodeLine{266                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_16KHZ;}
\DoxyCodeLine{267                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{268             \textcolor{keywordflow}{case} 32000:}
\DoxyCodeLine{269                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_32KHZ;}
\DoxyCodeLine{270                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{271             \textcolor{keywordflow}{case} 48000:}
\DoxyCodeLine{272                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{273                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{274             \textcolor{keywordflow}{case} 96000:}
\DoxyCodeLine{275                 srval         = daisy::SaiHandle::Config::SampleRate::SAI\_96KHZ;}
\DoxyCodeLine{276                 new\_blocksize = 48;}
\DoxyCodeLine{277                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{278             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{279                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{280                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{281         \}}
\DoxyCodeLine{282         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.StopAudio();}
\DoxyCodeLine{283         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetAudioSampleRate(srval);}
\DoxyCodeLine{284         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetAudioBlockSize(new\_blocksize);}
\DoxyCodeLine{285         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.StartAudio(current\_cb\_);}
\DoxyCodeLine{286     \}}
\DoxyCodeLine{287 }
\DoxyCodeLine{289     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a11de774c59fe3186fd7ec2d2688dd035}{StopAudio}}() \{ \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.StopAudio(); \}}
\DoxyCodeLine{290 }
\DoxyCodeLine{294     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_afd8e9b305b13614c94e095e521de142c}{SetAudioSampleRate}}(daisy::SaiHandle::Config::SampleRate samplerate)}
\DoxyCodeLine{295     \{}
\DoxyCodeLine{296         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetAudioSampleRate(samplerate);}
\DoxyCodeLine{297     \}}
\DoxyCodeLine{298 }
\DoxyCodeLine{303     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a0a641f21805e52d7f55536b65f163559}{SetAudioSampleRate}}(\textcolor{keywordtype}{int} samplerate)}
\DoxyCodeLine{304     \{}
\DoxyCodeLine{305         daisy::SaiHandle::Config::SampleRate srval;}
\DoxyCodeLine{306         \textcolor{keywordflow}{switch}(samplerate)}
\DoxyCodeLine{307         \{}
\DoxyCodeLine{308             \textcolor{keywordflow}{case} 16000:}
\DoxyCodeLine{309                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_16KHZ;}
\DoxyCodeLine{310                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{311             \textcolor{keywordflow}{case} 32000:}
\DoxyCodeLine{312                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_32KHZ;}
\DoxyCodeLine{313                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{314             \textcolor{keywordflow}{case} 48000:}
\DoxyCodeLine{315                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{316                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{317             \textcolor{keywordflow}{case} 96000:}
\DoxyCodeLine{318                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_96KHZ;}
\DoxyCodeLine{319                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{320             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{321                 srval = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{322                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{323         \}}
\DoxyCodeLine{324         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetAudioSampleRate(srval);}
\DoxyCodeLine{325     \}}
\DoxyCodeLine{326 }
\DoxyCodeLine{328     \textcolor{keywordtype}{float} \mbox{\hyperlink{classaurora_1_1_hardware_acfbbc94dbfc32ceb5722dd110543239a}{AudioSampleRate}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.audio\_handle.GetSampleRate(); \}}
\DoxyCodeLine{329 }
\DoxyCodeLine{331     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aa7205d245f0b220379dd42e33031aee6}{SetAudioBlockSize}}(\textcolor{keywordtype}{size\_t} blocksize)}
\DoxyCodeLine{332     \{}
\DoxyCodeLine{333         \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetAudioBlockSize(blocksize);}
\DoxyCodeLine{334     \}}
\DoxyCodeLine{335 }
\DoxyCodeLine{337     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classaurora_1_1_hardware_a68e41ade8aac5f5b7c0e4b5b5e720389}{AudioBlockSize}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.AudioBlockSize(); \}}
\DoxyCodeLine{338 }
\DoxyCodeLine{340     \textcolor{keywordtype}{float} \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.AudioCallbackRate(); \}}
\DoxyCodeLine{341 }
\DoxyCodeLine{343     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a5173957d8c34b3d0c8f7965152d0c015}{SetTestLed}}(\textcolor{keywordtype}{bool} state) \{ \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.SetLed(state); \}}
\DoxyCodeLine{344 }
\DoxyCodeLine{350     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a07069982db84a01fc8b9ecd11ab1cc6d}{ClearLeds}}()}
\DoxyCodeLine{351     \{}
\DoxyCodeLine{352         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaa843f019f3d74106e40f62494ddf0c65}{LED\_LAST}}; i++)}
\DoxyCodeLine{353         \{}
\DoxyCodeLine{354             \mbox{\hyperlink{classaurora_1_1_hardware_adbdb1f3307f6280acf7c2743e685043b}{SetLed}}((\mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1e}{Leds}})i, 0.0f, 0.0f, 0.0f);}
\DoxyCodeLine{355         \}}
\DoxyCodeLine{356     \}}
\DoxyCodeLine{357 }
\DoxyCodeLine{363     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_ab8cb3c31427a2edc37038e78bbf27ce0}{WriteLeds}}() \{ led\_driver\_.SwapBuffersAndTransmit(); \}}
\DoxyCodeLine{364 }
\DoxyCodeLine{371     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_adbdb1f3307f6280acf7c2743e685043b}{SetLed}}(\mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1e}{Leds}} idx, \textcolor{keywordtype}{float} r, \textcolor{keywordtype}{float} g, \textcolor{keywordtype}{float} b)}
\DoxyCodeLine{372     \{}
\DoxyCodeLine{373         LedIdx led = LedMap[idx];}
\DoxyCodeLine{374         \textcolor{keywordflow}{if}(led.r != -\/1)}
\DoxyCodeLine{375             led\_driver\_.SetLed(led.r, r);}
\DoxyCodeLine{376         led\_driver\_.SetLed(led.g, g);}
\DoxyCodeLine{377         led\_driver\_.SetLed(led.b, b);}
\DoxyCodeLine{378     \}}
\DoxyCodeLine{379 }
\DoxyCodeLine{383     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a55b1cae42552b2e126e207ede05a217e}{ProcessAllControls}}()}
\DoxyCodeLine{384     \{}
\DoxyCodeLine{385         \mbox{\hyperlink{classaurora_1_1_hardware_a0a63c31dc3e81f4886eb02d099f37da0}{ProcessAnalogControls}}();}
\DoxyCodeLine{386         \mbox{\hyperlink{classaurora_1_1_hardware_ad15c633e129da7cd8630e79b9853c5e9}{ProcessDigitalControls}}();}
\DoxyCodeLine{387     \}}
\DoxyCodeLine{388 }
\DoxyCodeLine{392     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_ad15c633e129da7cd8630e79b9853c5e9}{ProcessDigitalControls}}()}
\DoxyCodeLine{393     \{}
\DoxyCodeLine{394         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a77fb243b24a94ebedcf2251056027b64}{SW\_LAST}}; i++)}
\DoxyCodeLine{395         \{}
\DoxyCodeLine{396             \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[i].Debounce();}
\DoxyCodeLine{397         \}}
\DoxyCodeLine{398     \}}
\DoxyCodeLine{399 }
\DoxyCodeLine{403     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a0a63c31dc3e81f4886eb02d099f37da0}{ProcessAnalogControls}}()}
\DoxyCodeLine{404     \{}
\DoxyCodeLine{405         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}; i++)}
\DoxyCodeLine{406         \{}
\DoxyCodeLine{407             \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[i].Process();}
\DoxyCodeLine{408         \}}
\DoxyCodeLine{409 }
\DoxyCodeLine{410         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{411         \{}
\DoxyCodeLine{412             \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[i].Process();}
\DoxyCodeLine{413         \}}
\DoxyCodeLine{414     \}}
\DoxyCodeLine{418     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} \mbox{\hyperlink{classaurora_1_1_hardware_a2801f3cc7c7f8aac1e6214100cab1bca}{GetKnobValue}}(\textcolor{keywordtype}{int} ctrl)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[ctrl].Value(); \}}
\DoxyCodeLine{419 }
\DoxyCodeLine{425     \textcolor{keyword}{inline} \textcolor{keyword}{const} daisy::Switch \&\mbox{\hyperlink{classaurora_1_1_hardware_a6282db62b4e951cfdd69bfe19af7e695}{GetButton}}(\textcolor{keywordtype}{int} idx)\textcolor{keyword}{ const}}
\DoxyCodeLine{426 \textcolor{keyword}{    }\{}
\DoxyCodeLine{427         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[idx];}
\DoxyCodeLine{428     \}}
\DoxyCodeLine{429 }
\DoxyCodeLine{435     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classaurora_1_1_hardware_a937329e3337528e668730e7225615479}{GetGateTrig}}(\textcolor{keywordtype}{int} idx) \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[idx].Trig(); \}}
\DoxyCodeLine{436 }
\DoxyCodeLine{440     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classaurora_1_1_hardware_ab409d56d96bbda7a63828fb390a249f0}{GetGateState}}(\textcolor{keywordtype}{int} idx) \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[idx].State(); \}}
\DoxyCodeLine{441 }
\DoxyCodeLine{443     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a1409ef9c06403f3793537b8dce62af56}{UpdateHidRates}}()}
\DoxyCodeLine{444     \{}
\DoxyCodeLine{445         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{446         \{}
\DoxyCodeLine{447             \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[i].SetSampleRate(\mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{448         \}}
\DoxyCodeLine{449         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}; i++)}
\DoxyCodeLine{450         \{}
\DoxyCodeLine{451             \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[i].SetSampleRate(\mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{452         \}}
\DoxyCodeLine{453         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a77fb243b24a94ebedcf2251056027b64}{SW\_LAST}}; i++)}
\DoxyCodeLine{454         \{}
\DoxyCodeLine{455             \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[i].SetUpdateRate(\mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{456         \}}
\DoxyCodeLine{457     \}}
\DoxyCodeLine{458 }
\DoxyCodeLine{468     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a7d036bded4a2cc66b4ce3976f7b7b408}{PrepareMedia}}(}
\DoxyCodeLine{469         daisy::USBHostHandle::ConnectCallback     connect\_cb      = \textcolor{keyword}{nullptr},}
\DoxyCodeLine{470         daisy::USBHostHandle::DisconnectCallback  disconnect\_cb   = \textcolor{keyword}{nullptr},}
\DoxyCodeLine{471         daisy::USBHostHandle::ClassActiveCallback class\_active\_cb = \textcolor{keyword}{nullptr},}
\DoxyCodeLine{472         daisy::USBHostHandle::ErrorCallback       error\_cb        = \textcolor{keyword}{nullptr},}
\DoxyCodeLine{473         \textcolor{keywordtype}{void}                                     *userdata        = \textcolor{keyword}{nullptr})}
\DoxyCodeLine{474     \{}
\DoxyCodeLine{476         daisy::USBHostHandle::Config usbcfg;}
\DoxyCodeLine{477         usbcfg.connect\_callback      = connect\_cb;}
\DoxyCodeLine{478         usbcfg.disconnect\_callback   = disconnect\_cb;}
\DoxyCodeLine{479         usbcfg.class\_active\_callback = class\_active\_cb;}
\DoxyCodeLine{480         usbcfg.error\_callback        = error\_cb;}
\DoxyCodeLine{481         usbcfg.userdata              = userdata;}
\DoxyCodeLine{482         \mbox{\hyperlink{namespaceaurora_add63f29f2efd87c1754e7add264350e8}{usb}}.Init(usbcfg);}
\DoxyCodeLine{483 }
\DoxyCodeLine{485         daisy::FatFSInterface::Config fsi\_cfg;}
\DoxyCodeLine{486         fsi\_cfg.media = daisy::FatFSInterface::Config::MEDIA\_USB;}
\DoxyCodeLine{487         \mbox{\hyperlink{namespaceaurora_a300b1377a387f60ff447c08d7a747877}{fatfs\_interface}}.Init(fsi\_cfg);}
\DoxyCodeLine{488         f\_mount(\&\mbox{\hyperlink{namespaceaurora_a300b1377a387f60ff447c08d7a747877}{fatfs\_interface}}.GetUSBFileSystem(),}
\DoxyCodeLine{489                 \mbox{\hyperlink{namespaceaurora_a300b1377a387f60ff447c08d7a747877}{fatfs\_interface}}.GetUSBPath(),}
\DoxyCodeLine{490                 0);}
\DoxyCodeLine{491     \}}
\DoxyCodeLine{492 }
\DoxyCodeLine{496     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} \mbox{\hyperlink{classaurora_1_1_hardware_ad7f6526ef78ee6583d74db5e25c9f5d4}{GetWarpVoct}}()}
\DoxyCodeLine{497     \{}
\DoxyCodeLine{498         \textcolor{keywordflow}{return} voct\_cal.ProcessInput(\mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53812239f728e42ebeffcdcb9c076345}{CV\_WARP}}].Value());}
\DoxyCodeLine{499     \}}
\DoxyCodeLine{500 }
\DoxyCodeLine{507     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} \mbox{\hyperlink{classaurora_1_1_hardware_aa51dba9b46e67b772d5209709d3f7ff1}{GetCvValue}}(\textcolor{keywordtype}{int} cv\_idx)}
\DoxyCodeLine{508     \{}
\DoxyCodeLine{509         \textcolor{keywordflow}{if}(cv\_idx != \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53812239f728e42ebeffcdcb9c076345}{CV\_WARP}})}
\DoxyCodeLine{510             \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[cv\_idx].Value() -\/ cv\_offsets\_[cv\_idx];}
\DoxyCodeLine{511         \textcolor{keywordflow}{else}}
\DoxyCodeLine{512             \textcolor{keywordflow}{return} \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[cv\_idx].Value();}
\DoxyCodeLine{513     \}}
\DoxyCodeLine{514 }
\DoxyCodeLine{520     \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_abb0131cca6e4ccdaa6791aca1fb04c9b}{DelayMs}}(\textcolor{keywordtype}{size\_t} del) \{ \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.DelayMs(del); \}}
\DoxyCodeLine{521 }
\DoxyCodeLine{523     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a47068b9d6ae740bcdfeb0bc96ecbb472}{CalibrateV1}}(\textcolor{keywordtype}{float} v1) \{ warp\_v1\_ = v1; \}}
\DoxyCodeLine{524 }
\DoxyCodeLine{528     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aef0beb521b2108ab3bfed942e9f90d66}{CalibrateV3}}(\textcolor{keywordtype}{float} v3)}
\DoxyCodeLine{529     \{}
\DoxyCodeLine{530         warp\_v3\_ = v3;}
\DoxyCodeLine{531         voct\_cal.Record(warp\_v1\_, warp\_v3\_);}
\DoxyCodeLine{532         cal\_save\_flag\_ = \textcolor{keyword}{true};}
\DoxyCodeLine{533     \}}
\DoxyCodeLine{534 }
\DoxyCodeLine{538     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aa1ed24974dcc71d2bb3db062233fb409}{SetWarpCalData}}(\textcolor{keywordtype}{float} scale, \textcolor{keywordtype}{float} offset)}
\DoxyCodeLine{539     \{}
\DoxyCodeLine{540         voct\_cal.SetData(scale, offset);}
\DoxyCodeLine{541     \}}
\DoxyCodeLine{542 }
\DoxyCodeLine{546     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a522f94d085e33442b847ac2b9d54d3c8}{GetWarpCalData}}(\textcolor{keywordtype}{float} \&scale, \textcolor{keywordtype}{float} \&offset)}
\DoxyCodeLine{547     \{}
\DoxyCodeLine{548         voct\_cal.GetData(scale, offset);}
\DoxyCodeLine{549     \}}
\DoxyCodeLine{550 }
\DoxyCodeLine{552     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_adc9005998152e230aaca663d100f5714}{SetCvOffsetData}}(\textcolor{keywordtype}{float} *data)}
\DoxyCodeLine{553     \{}
\DoxyCodeLine{554         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{555         \{}
\DoxyCodeLine{556             cv\_offsets\_[i] = data[i];}
\DoxyCodeLine{557         \}}
\DoxyCodeLine{558     \}}
\DoxyCodeLine{559 }
\DoxyCodeLine{561     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_aae4ac8a07f1e0c07477c7fc9902347cf}{GetCvOffsetData}}(\textcolor{keywordtype}{float} *data)}
\DoxyCodeLine{562     \{}
\DoxyCodeLine{563         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{564         \{}
\DoxyCodeLine{565             data[i] = cv\_offsets\_[i];}
\DoxyCodeLine{566         \}}
\DoxyCodeLine{567     \}}
\DoxyCodeLine{568 }
\DoxyCodeLine{570     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classaurora_1_1_hardware_a294ba6486991b337181a83ec1a961eb7}{ReadyToSaveCal}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} cal\_save\_flag\_; \}}
\DoxyCodeLine{571 }
\DoxyCodeLine{573     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{classaurora_1_1_hardware_a9704429136666cd1ef67b6385d20bf63}{ClearSaveCalFlag}}() \{ cal\_save\_flag\_ = \textcolor{keyword}{false}; \}}
\DoxyCodeLine{574 }
\DoxyCodeLine{576     daisy::AnalogControl \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}];}
\DoxyCodeLine{577 }
\DoxyCodeLine{579     daisy::Switch \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[\mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a77fb243b24a94ebedcf2251056027b64}{SW\_LAST}}];}
\DoxyCodeLine{580 }
\DoxyCodeLine{582     daisy::GateIn \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[\mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3ea8a43310078f25453bf3286dfcac4a2f5}{GATE\_LAST}}];}
\DoxyCodeLine{583 }
\DoxyCodeLine{585     daisy::AnalogControl \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[\mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}];}
\DoxyCodeLine{586 }
\DoxyCodeLine{588     daisy::DaisySeed \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}};}
\DoxyCodeLine{589 }
\DoxyCodeLine{590   \textcolor{keyword}{private}:}
\DoxyCodeLine{596     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} uint32\_t kCalibrationDataOffset = 4096;}
\DoxyCodeLine{597 }
\DoxyCodeLine{599     \textcolor{keyword}{struct }LedIdx}
\DoxyCodeLine{600     \{}
\DoxyCodeLine{601         int8\_t r;}
\DoxyCodeLine{602         int8\_t g;}
\DoxyCodeLine{603         int8\_t b;}
\DoxyCodeLine{604     \};}
\DoxyCodeLine{605 }
\DoxyCodeLine{607     \textcolor{keyword}{const} LedIdx LedMap[\mbox{\hyperlink{namespaceaurora_a9a9c6ab298a74678c30dc9d3947d8e1eaa843f019f3d74106e40f62494ddf0c65}{LED\_LAST}}] = \{\{0, 1, 2\},}
\DoxyCodeLine{608                                      \{3, 4, 5\},}
\DoxyCodeLine{609                                      \{6, 7, 8\},}
\DoxyCodeLine{610                                      \{9, 10, 11\},}
\DoxyCodeLine{611                                      \{16, 17, 18\},}
\DoxyCodeLine{612                                      \{12, 13, 14\},}
\DoxyCodeLine{613                                      \{22, 23, 24\},}
\DoxyCodeLine{614                                      \{28, 29, 30\},}
\DoxyCodeLine{615                                      \{-\/1, 20, 21\},}
\DoxyCodeLine{616                                      \{-\/1, 26, 27\},}
\DoxyCodeLine{617                                      \{-\/1, 19, 25\}\};}
\DoxyCodeLine{618 }
\DoxyCodeLine{620     \textcolor{keyword}{enum class} HardwareVersion}
\DoxyCodeLine{621     \{}
\DoxyCodeLine{622         REV3, }
\DoxyCodeLine{623         REV4, }
\DoxyCodeLine{624     \};}
\DoxyCodeLine{625 }
\DoxyCodeLine{626 }
\DoxyCodeLine{628     daisy::LedDriverPca9685<2, true> led\_driver\_;}
\DoxyCodeLine{629 }
\DoxyCodeLine{631     daisy::AudioHandle::AudioCallback current\_cb\_;}
\DoxyCodeLine{632 }
\DoxyCodeLine{633     daisy::TimerHandle tim5\_handle;}
\DoxyCodeLine{634     daisy::I2CHandle   i2c;}
\DoxyCodeLine{635     daisy::Pcm3060     codec;}
\DoxyCodeLine{636 }
\DoxyCodeLine{637     HardwareVersion hw\_version;}
\DoxyCodeLine{638 }
\DoxyCodeLine{640     \textcolor{keywordtype}{float}                  warp\_v1\_, warp\_v3\_;}
\DoxyCodeLine{641     daisy::VoctCalibration voct\_cal;}
\DoxyCodeLine{642     \textcolor{keywordtype}{float}                  cv\_offsets\_[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}];}
\DoxyCodeLine{643 }
\DoxyCodeLine{644     \textcolor{keywordtype}{bool} cal\_save\_flag\_;}
\DoxyCodeLine{645 }
\DoxyCodeLine{646 }
\DoxyCodeLine{647     \textcolor{keywordtype}{void} ConfigureAudio()}
\DoxyCodeLine{648     \{}
\DoxyCodeLine{650         \textcolor{keywordflow}{if}(hw\_version == HardwareVersion::REV3)}
\DoxyCodeLine{651         \{}
\DoxyCodeLine{652             daisy::I2CHandle::Config codec\_i2c\_config;}
\DoxyCodeLine{653             codec\_i2c\_config.periph}
\DoxyCodeLine{654                 = daisy::I2CHandle::Config::Peripheral::I2C\_1;}
\DoxyCodeLine{655             codec\_i2c\_config.pin\_config = \{\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(11), \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(12)\};}
\DoxyCodeLine{656             codec\_i2c\_config.speed}
\DoxyCodeLine{657                 = daisy::I2CHandle::Config::Speed::I2C\_400KHZ;}
\DoxyCodeLine{658             codec\_i2c\_config.mode = daisy::I2CHandle::Config::Mode::I2C\_MASTER;}
\DoxyCodeLine{659 }
\DoxyCodeLine{660             i2c.Init(codec\_i2c\_config);}
\DoxyCodeLine{661             codec.Init(i2c);}
\DoxyCodeLine{662 }
\DoxyCodeLine{663             daisy::SaiHandle::Config sai\_cfg;}
\DoxyCodeLine{664             sai\_cfg.periph    = daisy::SaiHandle::Config::Peripheral::SAI\_2;}
\DoxyCodeLine{665             sai\_cfg.sr        = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{666             sai\_cfg.bit\_depth = daisy::SaiHandle::Config::BitDepth::SAI\_24BIT;}
\DoxyCodeLine{667             sai\_cfg.a\_sync    = daisy::SaiHandle::Config::Sync::SLAVE;}
\DoxyCodeLine{668             sai\_cfg.b\_sync    = daisy::SaiHandle::Config::Sync::MASTER;}
\DoxyCodeLine{669             sai\_cfg.a\_dir     = daisy::SaiHandle::Config::Direction::RECEIVE;}
\DoxyCodeLine{670             sai\_cfg.b\_dir     = daisy::SaiHandle::Config::Direction::TRANSMIT;}
\DoxyCodeLine{671             sai\_cfg.pin\_config.fs   = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(27);}
\DoxyCodeLine{672             sai\_cfg.pin\_config.mclk = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(24);}
\DoxyCodeLine{673             sai\_cfg.pin\_config.sck  = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(28);}
\DoxyCodeLine{674             sai\_cfg.pin\_config.sa   = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(26);}
\DoxyCodeLine{675             sai\_cfg.pin\_config.sb   = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(25);}
\DoxyCodeLine{676             \textcolor{comment}{// Then Initialize}}
\DoxyCodeLine{677             daisy::SaiHandle sai\_2\_handle;}
\DoxyCodeLine{678             sai\_2\_handle.Init(sai\_cfg);}
\DoxyCodeLine{679             daisy::AudioHandle::Config audio\_cfg;}
\DoxyCodeLine{680             audio\_cfg.blocksize = 48;}
\DoxyCodeLine{681             audio\_cfg.samplerate}
\DoxyCodeLine{682                 = daisy::SaiHandle::Config::SampleRate::SAI\_48KHZ;}
\DoxyCodeLine{683             audio\_cfg.postgain = 1.0f;}
\DoxyCodeLine{684             \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.audio\_handle.Init(audio\_cfg, sai\_2\_handle);}
\DoxyCodeLine{685         \}}
\DoxyCodeLine{686         \textcolor{keywordflow}{else}}
\DoxyCodeLine{687         \{}
\DoxyCodeLine{689             daisy::GPIO deemp;}
\DoxyCodeLine{690             daisy::Pin  deemp\_pin(daisy::PORTB, 11);}
\DoxyCodeLine{691             deemp.Init(deemp\_pin, daisy::GPIO::Mode::OUTPUT);}
\DoxyCodeLine{692             deemp.Write(0);}
\DoxyCodeLine{693         \}}
\DoxyCodeLine{694     \}}
\DoxyCodeLine{695 }
\DoxyCodeLine{696     \textcolor{comment}{// pots,switches, gates, CV}}
\DoxyCodeLine{697     \textcolor{keywordtype}{void} ConfigureControls()}
\DoxyCodeLine{698     \{}
\DoxyCodeLine{699         \textcolor{keywordflow}{if}(hw\_version == HardwareVersion::REV3)}
\DoxyCodeLine{700         \{}
\DoxyCodeLine{701             \textcolor{comment}{// ===== CV and Pots (adc) =====}}
\DoxyCodeLine{702             daisy::AdcChannelConfig cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + 1];}
\DoxyCodeLine{703 }
\DoxyCodeLine{704             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{705             \{}
\DoxyCodeLine{706                 cfg[i].InitSingle(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(17 + i));}
\DoxyCodeLine{707             \}}
\DoxyCodeLine{708             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}].InitMux(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(16),}
\DoxyCodeLine{709                                  6,}
\DoxyCodeLine{710                                  \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(7),}
\DoxyCodeLine{711                                  \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(8),}
\DoxyCodeLine{712                                  \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(9));}
\DoxyCodeLine{713             \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.Init(cfg, \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + 1);}
\DoxyCodeLine{714 }
\DoxyCodeLine{715             \textcolor{comment}{// init cv as bipolar analog controls}}
\DoxyCodeLine{716             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{717             \{}
\DoxyCodeLine{718                 \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[i].InitBipolarCv(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.GetPtr(i), \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{719             \}}
\DoxyCodeLine{720 }
\DoxyCodeLine{721             \textcolor{comment}{// init pots as analog controls}}
\DoxyCodeLine{722             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}; i++)}
\DoxyCodeLine{723             \{}
\DoxyCodeLine{724                 \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[i].Init(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.GetMuxPtr(\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}, i),}
\DoxyCodeLine{725                                  \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{726             \}}
\DoxyCodeLine{727 }
\DoxyCodeLine{728             \textcolor{comment}{// ===== gates =====}}
\DoxyCodeLine{729             dsy\_gpio\_pin pin;}
\DoxyCodeLine{730             pin = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(23);}
\DoxyCodeLine{731             \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[\mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3eaa74bc67b4d25cfae7d624cc022afda9e}{GATE\_FREEZE}}].Init(\&pin);}
\DoxyCodeLine{732         \}}
\DoxyCodeLine{733         \textcolor{keywordflow}{else}}
\DoxyCodeLine{734         \{}
\DoxyCodeLine{736             daisy::AdcChannelConfig cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}];}
\DoxyCodeLine{738             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa7355bc47484ac9009e9ae5ea4519711c}{KNOB\_TIME}}].InitSingle(daisy::seed::A0);}
\DoxyCodeLine{739             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa5e99ba973f08c9c45bc352aaa8d9315b}{KNOB\_REFLECT}}].InitSingle(daisy::seed::A1);}
\DoxyCodeLine{740             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba14a9a281ea2e5fb0f4643ea71ac8f4fc}{CV\_ATMOSPHERE}}].InitSingle(daisy::seed::A2);}
\DoxyCodeLine{741             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba99ad46bf89ab0808918343824a12003d}{CV\_TIME}}].InitSingle(daisy::seed::A3);}
\DoxyCodeLine{742             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba20130ae1b93454a79fc03aeebe1c3459}{CV\_MIX}}].InitSingle(daisy::seed::A4);}
\DoxyCodeLine{743             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53094bc7122e2e060a025919c0b4c006}{CV\_REFLECT}}].InitSingle(daisy::seed::A5);}
\DoxyCodeLine{744             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba38a54728d2de8f46f2a0ec1e9b93d922}{CV\_BLUR}}].InitSingle(daisy::seed::A6);}
\DoxyCodeLine{745             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba53812239f728e42ebeffcdcb9c076345}{CV\_WARP}}].InitSingle(daisy::seed::A7);}
\DoxyCodeLine{746             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa4030ec072fbbcc5198927f787fc381ae}{KNOB\_MIX}}].InitSingle(daisy::seed::A8);}
\DoxyCodeLine{747             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa132e93ba27b993bd7bc17d340be96928}{KNOB\_WARP}}].InitSingle(daisy::seed::A9);}
\DoxyCodeLine{748             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa26e02f7c718ee0ba934d0fc005355179}{KNOB\_ATMOSPHERE}}].InitSingle(daisy::seed::A10);}
\DoxyCodeLine{749             cfg[\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa309901733cbf3f6fd847f847b88ff47d}{KNOB\_BLUR}}].InitSingle(daisy::seed::A11);}
\DoxyCodeLine{750             \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.Init(cfg, \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}});}
\DoxyCodeLine{751 }
\DoxyCodeLine{752             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}}; i++)}
\DoxyCodeLine{753             \{}
\DoxyCodeLine{754                 \mbox{\hyperlink{classaurora_1_1_hardware_acf2848fefd836794f85a1f7c5df8d0da}{cv}}[i].InitBipolarCv(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.GetPtr(i), \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{755             \}}
\DoxyCodeLine{756             \textcolor{comment}{// init pots as analog controls with offset to last CV for ptr}}
\DoxyCodeLine{757             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespaceaurora_afd0b5d0be3c1f756f0396bd2b2cbcecaa3fb7dc106c0f263d2f7843c3d85519e3}{KNOB\_LAST}}; i++)}
\DoxyCodeLine{758             \{}
\DoxyCodeLine{759                 \mbox{\hyperlink{classaurora_1_1_hardware_abd2012aeab93c8be8ca24c769b54bc86}{controls}}[i].Init(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.adc.GetPtr(\mbox{\hyperlink{namespaceaurora_aabe0e7004691ac0c9e1e3a93c5a8d06ba4a428b2569bd47fa6a9595eaee2b2560}{CV\_LAST}} + i),}
\DoxyCodeLine{760                                  \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{761             \}}
\DoxyCodeLine{762             dsy\_gpio\_pin freeze\_pin = daisy::seed::D26;}
\DoxyCodeLine{763             \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[\mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3eaa74bc67b4d25cfae7d624cc022afda9e}{GATE\_FREEZE}}].Init(\&freeze\_pin);}
\DoxyCodeLine{764         \}}
\DoxyCodeLine{765         \textcolor{comment}{// And anything generic to both versions}}
\DoxyCodeLine{766         \textcolor{comment}{// ===== switches =====}}
\DoxyCodeLine{767         \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[\mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a725a2822002e2209fc0916f2173d3271}{SW\_FREEZE}}].Init(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(1), \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{768         \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[\mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a45ae311227c962283f6c55b0b865b8c2}{SW\_REVERSE}}].Init(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(10), \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{769         \mbox{\hyperlink{classaurora_1_1_hardware_a079847333f7bda3f804b895443b37abd}{switches}}[\mbox{\hyperlink{namespaceaurora_ab239f6a72e39cc8d953568ce3d672921a6544313cfea960b855983f2c347ea96a}{SW\_SHIFT}}].Init(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(13), \mbox{\hyperlink{classaurora_1_1_hardware_a4bc3a4c3aca12f7c2a2508de79310739}{AudioCallbackRate}}());}
\DoxyCodeLine{770 }
\DoxyCodeLine{771         dsy\_gpio\_pin revpin = \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(14);}
\DoxyCodeLine{772         \mbox{\hyperlink{classaurora_1_1_hardware_af1e9933e57af6e2cce0bef976b599a7f}{gates}}[\mbox{\hyperlink{namespaceaurora_ae5a447392ac449b05dd557f31d02fd3ea57f639eba139528e9d5976c480688885}{GATE\_REVERSE}}].Init(\&revpin);}
\DoxyCodeLine{773     \}}
\DoxyCodeLine{774 }
\DoxyCodeLine{775     \textcolor{keywordtype}{void} ConfigureLeds()}
\DoxyCodeLine{776     \{}
\DoxyCodeLine{777         \textcolor{comment}{// reinit i2c at 1MHz}}
\DoxyCodeLine{778         daisy::I2CHandle::Config codec\_i2c\_config;}
\DoxyCodeLine{779         codec\_i2c\_config.periph = daisy::I2CHandle::Config::Peripheral::I2C\_1;}
\DoxyCodeLine{780         codec\_i2c\_config.pin\_config = \{\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(11), \mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.GetPin(12)\};}
\DoxyCodeLine{781         codec\_i2c\_config.speed      = daisy::I2CHandle::Config::Speed::I2C\_1MHZ;}
\DoxyCodeLine{782         codec\_i2c\_config.mode = daisy::I2CHandle::Config::Mode::I2C\_MASTER;}
\DoxyCodeLine{783         i2c.Init(codec\_i2c\_config);}
\DoxyCodeLine{784 }
\DoxyCodeLine{785         \textcolor{comment}{// init driver}}
\DoxyCodeLine{786         led\_driver\_.Init(i2c, \{0x00, 0x01\}, led\_dma\_buffer\_a, led\_dma\_buffer\_b);}
\DoxyCodeLine{787 }
\DoxyCodeLine{788         \mbox{\hyperlink{classaurora_1_1_hardware_a07069982db84a01fc8b9ecd11ab1cc6d}{ClearLeds}}();}
\DoxyCodeLine{789         \mbox{\hyperlink{classaurora_1_1_hardware_ab8cb3c31427a2edc37038e78bbf27ce0}{WriteLeds}}();}
\DoxyCodeLine{790     \}}
\DoxyCodeLine{791 }
\DoxyCodeLine{792     HardwareVersion GetBoardRevision()}
\DoxyCodeLine{793     \{}
\DoxyCodeLine{794         daisy::GPIO version\_gpio;}
\DoxyCodeLine{795         version\_gpio.Init(daisy::seed::D2,}
\DoxyCodeLine{796                           daisy::GPIO::Mode::INPUT,}
\DoxyCodeLine{797                           daisy::GPIO::Pull::PULLUP);}
\DoxyCodeLine{799         \textcolor{keyword}{auto} pinstate = version\_gpio.Read();}
\DoxyCodeLine{800         version\_gpio.DeInit();}
\DoxyCodeLine{801         \textcolor{keywordflow}{if}(pinstate)}
\DoxyCodeLine{802             \textcolor{keywordflow}{return} HardwareVersion::REV3;}
\DoxyCodeLine{803         \textcolor{keywordflow}{else}}
\DoxyCodeLine{804             \textcolor{keywordflow}{return} HardwareVersion::REV4;}
\DoxyCodeLine{805     \}}
\DoxyCodeLine{806 }
\DoxyCodeLine{808     \textcolor{keywordtype}{void} LoadCalibrationData()}
\DoxyCodeLine{809     \{}
\DoxyCodeLine{810         daisy::PersistentStorage<CalibrationData> cal\_storage(\mbox{\hyperlink{classaurora_1_1_hardware_abeeed8b2cb38b89c7d61a8d3819bd828}{seed}}.qspi);}
\DoxyCodeLine{811         CalibrationData                           default\_cal;}
\DoxyCodeLine{812         cal\_storage.Init(default\_cal, kCalibrationDataOffset);}
\DoxyCodeLine{813         \textcolor{keyword}{auto} \&cal\_data = cal\_storage.GetSettings();}
\DoxyCodeLine{814         \mbox{\hyperlink{classaurora_1_1_hardware_aa1ed24974dcc71d2bb3db062233fb409}{SetWarpCalData}}(cal\_data.warp\_scale, cal\_data.warp\_offset);}
\DoxyCodeLine{815         \mbox{\hyperlink{classaurora_1_1_hardware_adc9005998152e230aaca663d100f5714}{SetCvOffsetData}}(cal\_data.cv\_offset);}
\DoxyCodeLine{816     \}}
\DoxyCodeLine{817 \};}
\DoxyCodeLine{818 }
\DoxyCodeLine{819 \} \textcolor{comment}{// namespace aurora}}
\DoxyCodeLine{820 }
\DoxyCodeLine{821 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
